<!doctype html>
<html>
  <head>
    <script src="https://js.jotform.com/JotFormCustomWidget.min.js"></script>
    <script src="https://demo.jotform.com/s/umd/f5e61623280/for-formuser.js"></script>
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="pragma" content="no-cache" />

  <script>
async function searchKeyword(q) {
    const url = 'https://partnerportal.testworld.co.nz/PartnerPortal/s/sfsites/aura?r=9&aura.ApexAction.execute=1';
    const headers = {
        'authority': 'partnerportal.testworld.co.nz',
        'method': 'POST',
        'path': '/PartnerPortal/s/sfsites/aura?r=9&aura.ApexAction.execute=1',
        'scheme': 'https',
        'accept': '*/*',
        'accept-encoding': 'gzip, deflate, br, zstd',
        'accept-language': 'en-GB,en-US;q=0.9,en;q=0.8',
        'content-length': '883',
        'content-type': 'application/x-www-form-urlencoded; charset=UTF-8'
    };


    const body = 'message=%7B%22actions%22%3A%5B%7B%22id%22%3A%22201%3Ba%22%2C%22descriptor%22%3A%22aura%3A%2F%2FApexActionController%2FACTION%24execute%22%2C%22callingDescriptor%22%3A%22UNKNOWN%22%2C%22params%22%3A%7B%22namespace%22%3A%22%22%2C%22classname%22%3A%22ApplicationFlowAddressController%22%2C%22method%22%3A%22findAddress%22%2C%22params%22%3A%7B%22keywords%22%3A%2238%20kenepuru%22%7D%2C%22cacheable%22%3Afalse%2C%22isContinuation%22%3Afalse%7D%7D%5D%7D&aura.context=%7B%22mode%22%3A%22PROD%22%2C%22fwuid%22%3A%22c1ItM3NYNWFUOE5oQkUwZk1sYW1vQWg5TGxiTHU3MEQ5RnBMM0VzVXc1cmcxMS4zMjc2OC4z%22%2C%22app%22%3A%22siteforce%3AcommunityApp%22%2C%22loaded%22%3A%7B%22APPLICATION%40markup%3A%2F%2Fsiteforce%3AcommunityApp%22%3A%221237_QCP5Ih0RUYVLF144CXYCOA%22%7D%2C%22dn%22%3A%5B%5D%2C%22globals%22%3A%7B%7D%2C%22uad%22%3Atrue%7D&aura.pageURI=%2FPartnerPortal%2Fs%2Fel-new-connection&aura.token=null';

    try {
        const response = await fetch(url, {
            method: 'POST',
            headers: headers,
            body: body
        });

        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }

        const data = await response.json();
        console.log(data);
    } catch (error) {
        console.error('Error:', error);
    }
}

</script>
<style type="text/css">
  input {
    height: 2.5em;
    min-width: 100%;
    max-width: 100%;
    background-color: #fff;
    border-color: #c3cad8 !important;
    color: #2c3345;
    font-size: 1em;
    border-radius: 4px;
    border: 1px solid;
    display: block;
    padding: 0 .625em;
    outline: 0;
    margin: 0;
    text-align: left;
    box-sizing: border-box;
  }

</style>
  </head>
  <body>
    <div id="addressArea" style="display:flex; flex-direction: column; gap:1rem;">
        <input type="text" id="query" placeholder="Start typing your address here..." />
        <input type="text" id="address_line_1" placeholder="Street" />
        <input type="text" id="suburb" placeholder="Suburb"/>
        <input type="text" id="state" placeholder="City"/>
        <input type="text" id="postcode" placeholder="Post Code"/>

    </div>
    <script type="text/javascript">
      document.addEventListener('DOMContentLoaded', async function() {
          try {
              await searchKeyword('38 kenepuru');
          } catch (error) {
              console.error('Error:', error);
          }
      });

      // always subscribe to ready event and implement widget related code
      // inside callback function , it is the best practice while developing widgets
      JFCustomWidget.subscribe("ready", function (data) {
        JFCustomWidget.subscribe("submit", function () {
          JFCustomWidget.sendSubmit(widget.getData());
        });
      });
    </script>
  </body>
</html>